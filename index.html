<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>毛选语录Bot</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            font-family: '楷体', 'KaiTi', '华文楷体', 'STKaiti', serif;
            
            /* 自定义渐变背景 */
            background: linear-gradient(135deg, 
                #667eea 0%, 
                #764ba2 25%, 
                #f093fb 50%, 
                #f5576c 75%, 
                #4facfe 100%
            );
            
            /* 添加背景纹理 */
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1) 0%, transparent 50%);
            background-attachment: fixed;
            
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        /* 主容器 */
        .container {
            max-width: 800px;
            width: 100%;
            text-align: center;
        }
        
        /* 标题样式 */
        h1 {
            font-family: '楷体', 'KaiTi', '华文楷体', 'STKaiti', serif;
            font-size: 3.5em;
            color: #000000;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.3);
            font-weight: bold;
            letter-spacing: 2px;
        }
        
        /* 语录文本框 */
        .quote-container {
            background: rgba(248, 248, 248, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px 30px;
            margin: 30px 0;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .quote-container:hover {
            background: rgba(250, 250, 250, 0.9);
            transform: translateY(-2px);
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }
        
        /* 语录文字 */
        .quote-text {
            font-size: 1.8em;
            line-height: 1.6;
            color: #333;
            margin-bottom: 20px;
            font-weight: 300;
            letter-spacing: 1px;
            font-family: '楷体', 'KaiTi', '华文楷体', 'STKaiti', serif;
        }
        
        /* 语录出处 */
        .quote-source {
            font-size: 1.1em;
            color: #666;
            font-style: italic;
            margin-bottom: 25px;
            font-family: '楷体', 'KaiTi', '华文楷体', 'STKaiti', serif;
        }
        
        /* 收藏状态指示器 */
        .favorite-indicator {
            position: absolute;
            top: 15px;
            right: 20px;
            color: #ff6b6b;
            font-size: 1.5em;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .favorite-indicator.show {
            opacity: 1;
        }
        
        /* 按钮样式 */
        .btn {
            background: transparent;
            color: #000000;
            border: 2px solid rgba(255, 255, 255, 0.5);
            padding: 10px 20px;
            font-size: 0.9em;
            font-family: '楷体', 'KaiTi', '华文楷体', 'STKaiti', serif;
            border-radius: 20px;
            cursor: pointer;
            margin: 8px;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.8);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }
        
        .btn:active {
            transform: translateY(0px);
        }
        
        .btn.favorited {
            color: #ff6b6b;
            border-color: #ff6b6b;
        }
        
        /* 收藏列表样式 */
        .favorites-section {
            margin-top: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        
        .favorites-header {
            color: #000;
            font-size: 1.3em;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .favorites-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .favorite-item {
            background: rgba(255, 255, 255, 0.6);
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .favorite-item:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateX(5px);
        }
        
        .favorite-item .quote {
            color: #333;
            font-size: 1em;
            margin-bottom: 5px;
        }
        
        .favorite-item .source {
            color: #666;
            font-size: 0.9em;
        }
        
        .hidden {
            display: none;
        }
        
        /* 分享成功提示 */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9em;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5em;
            }
            
            .quote-text {
                font-size: 1.4em;
            }
            
            .quote-container {
                padding: 30px 20px;
                margin: 20px 10px;
            }
            
            .favorites-section {
                margin-top: 30px;
                padding: 15px;
            }
        }
        
        /* 动画效果 */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>毛选语录Bot</h1>
        
        <div class="quote-container fade-in" id="quoteContainer">
            <div class="favorite-indicator" id="favoriteIndicator">♥</div>
            <div class="quote-text" id="quoteText">"星星之火，可以燎原"</div>
            <div class="quote-source" id="quoteSource">——《星星之火，可以燎原》1930年</div>
        </div>
        
        <div class="button-group">
            <button class="btn" id="changeBtn">⟲ 换一句</button>
            <button class="btn" id="favoriteBtn">♡ 收藏</button>
            <button class="btn" id="shareBtn">↑ 分享</button>
        </div>
        
        <!-- 收藏列表区域 -->
        <div class="favorites-section" id="favoritesSection">
            <div class="favorites-header">
                <span>我的收藏 (<span id="favoriteCount">0</span>)</span>
                <button class="btn" id="clearBtn" style="font-size: 0.8em; padding: 5px 12px;">清空</button>
            </div>
            <div class="favorites-list" id="favoritesList">
                <p style="color: #666; text-align: center; margin: 20px 0;">还没有收藏的语录</p>
            </div>
        </div>
    </div>
    
    <!-- 通知提示 -->
    <div class="notification" id="notification">操作成功！</div>

    <script>
        // 语录数据库
        var quotesData = [
            {
                text: "\"星星之火，可以燎原\"",
                source: "——《星星之火，可以燎原》1930年"
            },
            {
                text: "\"世上无难事，只怕有心人\"",
                source: "——《水调歌头·重上井冈山》1965年"
            },
            {
                text: "\"好好学习，天天向上\"",
                source: "——题词 1951年"
            },
            {
                text: "\"实践是检验真理的唯一标准\"",
                source: "——《实践论》1937年"
            },
            {
                text: "\"没有调查，就没有发言权\"",
                source: "——《反对本本主义》1930年"
            },
            {
                text: "\"自己动手，丰衣足食\"",
                source: "——题词 1939年"
            },
            {
                text: "\"团结就是力量\"",
                source: "——《论联合政府》1945年"
            },
            {
                text: "\"一切反动派都是纸老虎\"",
                source: "——《和美国记者安娜·路易斯·斯特朗的谈话》1946年"
            },
            {
                text: "\"人民，只有人民，才是创造世界历史的动力\"",
                source: "——《论联合政府》1945年"
            },
            {
                text: "\"虚心使人进步，骄傲使人落后\"",
                source: "——《中国共产党第八次全国代表大会开幕词》1956年"
            },
            {
                text: "\"为人民服务\"",
                source: "——《为人民服务》1944年"
            },
            {
                text: "\"自力更生，艰苦奋斗\"",
                source: "——题词"
            },
            {
                text: "\"一万年太久，只争朝夕\"",
                source: "——《满江红·和郭沫若同志》1963年"
            },
            {
                text: "\"人不犯我，我不犯人；人若犯我，我必犯人\"",
                source: "——《关于重庆谈判》1945年"
            },
            {
                text: "\"枪杆子里面出政权\"",
                source: "——《战争和战略问题》1938年"
            },
            {
                text: "\"政治是不流血的战争，战争是流血的政治\"",
                source: "——《论持久战》1938年"
            },
            {
                text: "\"存地失人，人地皆失；存人失地，人地皆存\"",
                source: "——《论持久战》1938年"
            },
            {
                text: "\"我们的责任，是向人民负责\"",
                source: "——《抗日战争胜利后的时局和我们的方针》1945年"
            },
            {
                text: "\"要奋斗就会有牺牲，死人的事是经常发生的\"",
                source: "——《为人民服务》1944年"
            },
            {
                text: "\"独立自主，自力更生\"",
                source: "——《中国共产党在民族战争中的地位》1938年"
            },
            {
                text: "\"发展才是硬道理\"",
                source: "——讲话"
            },
            {
                text: "\"学而时习之，不亦说乎\"",
                source: "——引用《论语》"
            },
            {
                text: "\"文明其精神，野蛮其体魄\"",
                source: "——《体育之研究》1917年"
            },
            {
                text: "\"谦虚使人进步，骄傲使人落后\"",
                source: "——《在中国共产党第八次全国代表大会开幕词》1956年"
            },
            {
                text: "\"人总是要死的，但死的意义有不同\"",
                source: "——《为人民服务》1944年"
            },
            {
                text: "\"深挖洞，广积粮，不称霸\"",
                source: "——战备工作指示"
            },
            {
                text: "\"知识分子如果不和工农群众相结合，就不会有什么作为\"",
                source: "——《〈农村调查〉的序言和跋》1941年"
            },
            {
                text: "\"农村包围城市，武装夺取政权\"",
                source: "——《中国的红色政权为什么能够存在？》1928年"
            },
            {
                text: "\"实事求是，一切从实际出发\"",
                source: "——《改造我们的学习》1941年"
            },
            {
                text: "\"百花齐放，百家争鸣\"",
                source: "——《关于正确处理人民内部矛盾的问题》1957年"
            },
            {
                text: "\"数风流人物，还看今朝\"",
                source: "——《沁园春·雪》1936年"
            },
            {
                text: "\"天若有情天亦老，人间正道是沧桑\"",
                source: "——《七律·人民解放军占领南京》1949年"
            },
            {
                text: "\"江山如此多娇，引无数英雄竞折腰\"",
                source: "——《沁园春·雪》1936年"
            },
            {
                text: "\"俱往矣，数风流人物，还看今朝\"",
                source: "——《沁园春·雪》1936年"
            },
            {
                text: "\"雄关漫道真如铁，而今迈步从头越\"",
                source: "——《忆秦娥·娄山关》1935年"
            },
            {
                text: "\"不到长城非好汉\"",
                source: "——《清平乐·六盘山》1935年"
            },
            {
                text: "\"中华儿女多奇志，不爱红装爱武装\"",
                source: "——《为女民兵题照》1961年"
            },
            {
                text: "\"领导我们事业的核心力量是中国共产党\"",
                source: "——《中华人民共和国第一届全国人民代表大会第一次会议开幕词》1954年"
            },
            {
                text: "\"指导我们思想的理论基础是马克思列宁主义\"",
                source: "——《中华人民共和国第一届全国人民代表大会第一次会议开幕词》1954年"
            },
            {
                text: "\"我们来自五湖四海，为了一个共同的革命目标，走到一起来了\"",
                source: "——《为人民服务》1944年"
            },
            {
                text: "\"下定决心，不怕牺牲，排除万难，去争取胜利\"",
                source: "——《愚公移山》1945年"
            },
            {
                text: "\"愚公移山，改造中国\"",
                source: "——《愚公移山》1945年"
            },
            {
                text: "\"中国人民从此站起来了\"",
                source: "——《中华人民共和国中央人民政府公告》1949年"
            },
            {
                text: "\"团结—批评—团结\"",
                source: "——《整顿党的作风》1942年"
            },
            {
                text: "\"理论联系实际，密切联系群众，批评与自我批评\"",
                source: "——《论联合政府》1945年"
            },
            {
                text: "\"我们的政策是实行'百花齐放、百家争鸣'\"",
                source: "——《关于正确处理人民内部矛盾的问题》1957年"
            },
            {
                text: "\"我们的教育方针，应该使受教育者在德育、智育、体育几方面都得到发展\"",
                source: "——《关于正确处理人民内部矛盾的问题》1957年"
            },
            {
                text: "\"学习的敌人是自己的满足\"",
                source: "——《中国共产党在民族战争中的地位》1938年"
            },
            {
                text: "\"路线是个纲，纲举目张\"",
                source: "——《工作方法六十条》1958年"
            },
            {
                text: "\"宜将剩勇追穷寇，不可沽名学霸王\"",
                source: "——《七律·人民解放军占领南京》1949年"
            }
        ];
        
        var currentQuoteIndex = 0;
        var favorites = [];
        
        // 初始化
        function init() {
            // 从本地存储加载收藏
            try {
                var saved = localStorage.getItem('maoquotes_favorites');
                if (saved) {
                    favorites = JSON.parse(saved);
                }
            } catch (e) {
                console.log('加载收藏失败:', e);
            }
            
            updateFavoriteDisplay();
            renderFavoritesList();
            
            // 绑定按钮事件
            document.getElementById('changeBtn').onclick = changeQuote;
            document.getElementById('favoriteBtn').onclick = toggleFavorite;
            document.getElementById('shareBtn').onclick = shareQuote;
            document.getElementById('clearBtn').onclick = clearAllFavorites;
            
            // 键盘事件
            document.addEventListener('keydown', function(event) {
                if (event.code === 'Space') {
                    event.preventDefault();
                    changeQuote();
                }
            });
            
            console.log('毛选语录Bot初始化完成');
        }
        
        // 换一句语录
        function changeQuote() {
            console.log('换一句被点击');
            
            // 随机选择语录，避免重复
            var newIndex;
            do {
                newIndex = Math.floor(Math.random() * quotesData.length);
            } while (newIndex === currentQuoteIndex && quotesData.length > 1);
            
            currentQuoteIndex = newIndex;
            var quote = quotesData[currentQuoteIndex];
            
            // 获取页面元素
            var container = document.getElementById('quoteContainer');
            var textElement = document.getElementById('quoteText');
            var sourceElement = document.getElementById('quoteSource');
            
            // 添加淡出效果
            container.style.opacity = '0.3';
            container.style.transform = 'translateY(10px)';
            
            // 延迟更新内容
            setTimeout(function() {
                textElement.textContent = quote.text;
                sourceElement.textContent = quote.source;
                
                updateFavoriteDisplay();
                
                // 淡入效果
                container.style.opacity = '1';
                container.style.transform = 'translateY(0)';
            }, 200);
        }
        
        // 切换收藏状态
        function toggleFavorite() {
            console.log('收藏被点击');
            
            var quoteId = currentQuoteIndex;
            var favoriteBtn = document.getElementById('favoriteBtn');
            
            var index = favorites.indexOf(quoteId);
            if (index > -1) {
                // 取消收藏
                favorites.splice(index, 1);
                favoriteBtn.textContent = '♡ 收藏';
                favoriteBtn.classList.remove('favorited');
                showNotification('已取消收藏');
            } else {
                // 添加收藏
                favorites.push(quoteId);
                favoriteBtn.textContent = '♥ 已收藏';
                favoriteBtn.classList.add('favorited');
                showNotification('收藏成功！');
            }
            
            // 保存到本地存储
            try {
                localStorage.setItem('maoquotes_favorites', JSON.stringify(favorites));
            } catch (e) {
                console.log('保存收藏失败:', e);
            }
            
            updateFavoriteDisplay();
            renderFavoritesList();
        }
        
        // 更新收藏状态显示
        function updateFavoriteDisplay() {
            var favoriteBtn = document.getElementById('favoriteBtn');
            var favoriteIndicator = document.getElementById('favoriteIndicator');
            
            if (favorites.indexOf(currentQuoteIndex) > -1) {
                favoriteBtn.textContent = '♥ 已收藏';
                favoriteBtn.classList.add('favorited');
                favoriteIndicator.classList.add('show');
            } else {
                favoriteBtn.textContent = '♡ 收藏';
                favoriteBtn.classList.remove('favorited');
                favoriteIndicator.classList.remove('show');
            }
            
            document.getElementById('favoriteCount').textContent = favorites.length;
        }
        
        // 渲染收藏列表
        function renderFavoritesList() {
            var favoritesList = document.getElementById('favoritesList');
            
            if (favorites.length === 0) {
                favoritesList.innerHTML = '<p style="color: #666; text-align: center; margin: 20px 0;">还没有收藏的语录</p>';
                return;
            }
            
            var html = '';
            for (var i = 0; i < favorites.length; i++) {
                var quoteId = favorites[i];
                var quote = quotesData[quoteId];
                html += '<div class="favorite-item" data-quote-id="' + quoteId + '">';
                html += '<div class="quote">' + quote.text + '</div>';
                html += '<div class="source">' + quote.source + '</div>';
                html += '</div>';
            }
            
            favoritesList.innerHTML = html;
            
            // 为收藏项添加点击事件
            var items = favoritesList.getElementsByClassName('favorite-item');
            for (var i = 0; i < items.length; i++) {
                items[i].onclick = function() {
                    var quoteId = parseInt(this.getAttribute('data-quote-id'));
                    showQuote(quoteId);
                };
            }
        }
        
        // 显示指定语录
        function showQuote(quoteId) {
            currentQuoteIndex = quoteId;
            var quote = quotesData[quoteId];
            
            document.getElementById('quoteText').textContent = quote.text;
            document.getElementById('quoteSource').textContent = quote.source;
            
            updateFavoriteDisplay();
            
            // 滚动到语录区域
            document.getElementById('quoteContainer').scrollIntoView({
                behavior: 'smooth'
            });
        }
        
        // 清空所有收藏
        function clearAllFavorites() {
            if (favorites.length === 0) {
                showNotification('收藏列表已经是空的');
                return;
            }
            
            if (confirm('确定要清空所有收藏吗？')) {
                favorites = [];
                try {
                    localStorage.setItem('maoquotes_favorites', JSON.stringify(favorites));
                } catch (e) {
                    console.log('保存失败:', e);
                }
                updateFavoriteDisplay();
                renderFavoritesList();
                showNotification('已清空收藏列表');
            }
        }
        
        // 分享语录
        function shareQuote() {
            console.log('分享被点击');
            
            var currentQuote = quotesData[currentQuoteIndex];
            var shareText = currentQuote.text + '\n\n' + currentQuote.source + '\n\n来自：毛选语录Bot';
            
            // 尝试复制到剪贴板
            if (navigator.clipboard) {
                navigator.clipboard.writeText(shareText).then(function() {
                    showNotification('已复制到剪贴板！');
                }).catch(function() {
                    fallbackCopy(shareText);
                });
            } else {
                fallbackCopy(shareText);
            }
        }
        
        // 降级复制方法
        function fallbackCopy(text) {
            var textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                showNotification('已复制到剪贴板！');
            } catch (err) {
                console.error('复制失败:', err);
                alert('分享内容：\n\n' + text);
            }
            
            document.body.removeChild(textArea);
        }
        
        // 显示通知
        function showNotification(message) {
            var notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(function() {
                notification.classList.remove('show');
            }, 2000);
        }
        
        // 页面加载完成后初始化
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
